# 전자결제 시스템

---

## 사용자 정보

- 일반적인 사용자 정보에 추가로 서명 정보를 저장하고 있어야 한다.
- 서명 정보는 한 사람당 하나의 테이블 또는 파일을 사용해서 저장한다.<br>
서명 정보는 서버키와 사용자키를 이용해 이중 암호화 한다.
- 사용자 정보에는 해당 사용자의 서명 정보가 있는 테이블이나 파일 정보를 입력한다.
- 서명 정보를 이용할 때에는 서버키와 사용자키를 모두 입력해 복호화 한 내용을 문서키로 암호화해 저장한다.

---

## 문서 정보

- 문서는 두개의 테이블로 저장하는데, 하나는 결제자 리스트에 대한 내용이고, 하나는 문서 자체의 내용이다.
<br>두개의 테이블에는 동일한 문서키가 포함된다.
- 결제자 리스트 테이블에는 문서키, 순번, 사용자키, 서명정보, 서명일시, 파기정보가 포함된다.
- 문서테이블에는 문서키, 문서템플릿넘버, 기안일시, 완료일시, 파기정보가 포함된다.

---

- 결제자 리스트 테이블에 작성자의 서명이 저장되면 작성 완료로 판단하고, 동시에 다음 결제자를 작성자로 하는 문서를 자동 생성한다.
<br>?? 생성해야 하는가? 최초에 생성한 문서 정보를 그대로 사용해도 되지 않는가?
- 최초 작성자가 결제자 리스트를 작성하지만, 중간에 다음 결제자 중 누군가가 다음 결제자 리스트를 변경할 수 있다.
- 문서에 포함된 모든 결제자가 서명을 완료하면 해당 내용을 파일로 저장하고, 최초 작성자에게 알림을 준다.
- 문서는 열람 가능자 리스트가 있으며, 열람 가능자 리스트는 권한관리(tss)에서 한다.

